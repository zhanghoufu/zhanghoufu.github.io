<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="EOSlaozhang张后富区块链博客_EOS老张_张后富区块链_比特币老张">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://zhanghoufu.github.io">
    <!--SEO-->



<meta name="keywords" content="张后富的区块链博客是张后富搭建的一个交流区块链技术，记录区块链学习教程，学习心得的地方。"/>



<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>EOS4.0 最新版本局域网测试网络搭建教程 | EOSlaozhang张后富区块链博客_EOS老张_张后富区块链_比特币老张</title>


    <link rel="alternate" href="/atom.xml" title="EOSlaozhang张后富区块链博客_EOS老张_张后富区块链_比特币老张" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    





    
</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='eoslaozhang'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 张后富的区块链博客 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="EOS4.0 最新版本局域网测试网络搭建教程">
            
	            EOS4.0 最新版本局域网测试网络搭建教程
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/EOS">
            EOS
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/EOS" title='EOS'>
                        EOS
                    </a>
                
                    <a href="/tags/柚子" title='柚子'>
                        柚子
                    </a>
                
                    <a href="/tags/发币" title='发币'>
                        发币
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/05/23</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <p>今天教大家如何在自己本地搭建EOS环境，并基于进行合约部署。</p>
<p>运行平台：ubuntu16.04虚拟机  </p>
<p><strong>获取代码</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/EOSIO/eos --recursive</span><br><span class="line">git checkout dawn-v4.0.0</span><br></pre></td></tr></table></figure></p>
<p><strong>编译</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./eosio_build.sh</span><br></pre></td></tr></table></figure></p>
<p>编译可能会有个错误如下<br><img src="https://i.imgur.com/m2BQhwH.jpg" alt="错误图片"><br>解决方法是到build/contracts执行make命令，之后在重新执行编译脚本eosio_build.sh就可以了。</p>
<p>编译完成之后，在build目录下make install。<br>连接测试网络同步区块完成相关测试<br>连接社区的测试网络  </p>
<p><strong>config.ini配置如下:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">get-transactions-time-limit = 3</span><br><span class="line">genesis-json = &quot;genesis.json&quot;</span><br><span class="line">block-log-dir = &quot;blocks&quot;</span><br><span class="line">max-reversible-block-time = -1</span><br><span class="line">max-pending-transaction-time = -1</span><br><span class="line">max-deferred-transaction-time = 20</span><br><span class="line">shared-memory-size-mb = 32768</span><br><span class="line">faucet-create-interval-ms = 1000</span><br><span class="line">http-server-address = 0.0.0.0:8888</span><br><span class="line">access-control-allow-credentials = false</span><br><span class="line">p2p-listen-endpoint = 0.0.0.0:9876</span><br><span class="line">#自己ip:port</span><br><span class="line">p2p-server-address = 192.168.28.131:9876 </span><br><span class="line">p2p-peer-address = cn.party.eosfans.io:9877 </span><br><span class="line">p2p-peer-address = hk.party.eosfans.io:6789 </span><br><span class="line">agent-name =</span><br><span class="line">max-clients = 25</span><br><span class="line">connection-cleanup-period = 30</span><br><span class="line">network-version-match = 0</span><br><span class="line">sync-fetch-span = 100</span><br><span class="line">max-implicit-request = 1500</span><br><span class="line">enable-stale-production = false</span><br><span class="line">required-participation = 33</span><br><span class="line">producer-name = kgtest</span><br><span class="line">private-key = [&quot;EOS4ugXbSzF1EfcpM9TepkgpMqLiKb3M14LTjd8smQtcicH3KSaCp&quot;,&quot;5JwVVY24wGBJSLKPawU9fJ8VvbfBo3xEv1SRQAFdJqxD36cVk79&quot;]</span><br><span class="line"># Plugin(s) to enable, may be specified multiple times</span><br><span class="line">plugin = eosio::chain_api_plugin</span><br><span class="line">plugin = eosio::chain_plugin</span><br><span class="line">plugin= eosio::producer_plugin</span><br><span class="line">plugin = eosio::http_plugin</span><br></pre></td></tr></table></figure></p>
<p>   <strong> genesis配置如下：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;initial_timestamp&quot;: &quot;2018-04-06T12:00:00.000&quot;,</span><br><span class="line">&quot;initial_key&quot;: &quot;EOS7JWUDhCv6eGEoKJB4dTBF3GrLrJHT8jSeWhadpmH9Bkpt3jLy5&quot;,</span><br><span class="line">&quot;initial_configuration&quot;: &#123;</span><br><span class="line">&quot;base_per_transaction_net_usage&quot;: 100,</span><br><span class="line">&quot;base_per_transaction_cpu_usage&quot;: 500,</span><br><span class="line">&quot;base_per_action_cpu_usage&quot;: 1000,</span><br><span class="line">&quot;base_setcode_cpu_usage&quot;: 2097152,</span><br><span class="line">&quot;per_signature_cpu_usage&quot;: 100000,</span><br><span class="line">&quot;per_lock_net_usage&quot;: 32,</span><br><span class="line">&quot;context_free_discount_cpu_usage_num&quot;: 20,</span><br><span class="line">&quot;context_free_discount_cpu_usage_den&quot;: 100,</span><br><span class="line">&quot;max_transaction_cpu_usage&quot;: 10485760,</span><br><span class="line">&quot;max_transaction_net_usage&quot;: 104857,</span><br><span class="line">&quot;max_block_cpu_usage&quot;: 104857600,</span><br><span class="line">&quot;target_block_cpu_usage_pct&quot;: 1000,</span><br><span class="line">&quot;max_block_net_usage&quot;: 1048576,</span><br><span class="line">&quot;target_block_net_usage_pct&quot;: 1000,</span><br><span class="line">&quot;max_transaction_lifetime&quot;: 3600,</span><br><span class="line">&quot;max_transaction_exec_time&quot;: 0,</span><br><span class="line">&quot;max_authority_depth&quot;: 6,</span><br><span class="line">&quot;max_inline_depth&quot;: 4,</span><br><span class="line">&quot;max_inline_action_size&quot;: 4096,</span><br><span class="line">&quot;max_generated_transaction_count&quot;: 16,</span><br><span class="line">&quot;max_transaction_delay&quot;: 3888000</span><br><span class="line">&#125;,</span><br><span class="line">&quot;initial_chain_id&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果出现如下错误<br><img src="https://i.imgur.com/TbF9HWi.png" alt="出错图片"><br>在build目录下<br>make install，      删除~/.local/share/eosio/nodeos/data目录，重新启动nodeos命令，如果错误没有解决，可以多尝试几次，暂时还不知道什么原因。<br>局域网自己搭建一个测试网络</p>
<p><strong>Node1:192.168.195.144</strong></p>
<p><strong>config.ini配置如下:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">genesis-json = &quot;genesis.json&quot;</span><br><span class="line">block-log-dir = &quot;blocks&quot;</span><br><span class="line">shared-memory-size-mb = 1024</span><br><span class="line">http-server-address = 127.0.0.1:8888</span><br><span class="line">access-control-allow-credentials = false</span><br><span class="line">p2p-listen-endpoint = 0.0.0.0:9876</span><br><span class="line">p2p-server-address = 192.168.195.144:9876</span><br><span class="line">agent-name = &quot;EOS Test Agent&quot;</span><br><span class="line">allowed-connection = any</span><br><span class="line">max-clients = 25</span><br><span class="line">connection-cleanup-period = 30</span><br><span class="line">network-version-match = 0</span><br><span class="line">sync-fetch-span = 100</span><br><span class="line">max-implicit-request = 1500</span><br><span class="line">enable-stale-production = true</span><br><span class="line">max-transaction-time = 30</span><br><span class="line">required-participation = 33</span><br><span class="line">producer-name = eosio</span><br><span class="line">private-key = [&quot;EOS8HF8XSGjfSvG5zfPgXFcUjFJh56ifWzYneWMEQSCkXgSdPJ51R&quot;,&quot;5JC4FQVzAZuxWmaAfbW1RWsNDEpjjF5enfn9WBHkYTupFJQaBWt&quot;]</span><br><span class="line">txn-reference-block-lag = 0</span><br><span class="line">wallet-dir = &quot;.&quot;</span><br><span class="line">unlock-timeout = 900</span><br><span class="line">plugin = eosio::chain_api_plugin</span><br><span class="line">plugin = eosio::chain_plugin</span><br><span class="line">plugin = eosio::producer_plugin</span><br><span class="line">plugin = eosio::http_plugin</span><br></pre></td></tr></table></figure></p>
<p><strong>genesis配置如下</strong>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;initial_timestamp&quot;: &quot;2018-03-02T12:00:00.000&quot;,</span><br><span class="line">  &quot;initial_key&quot;: &quot;EOS8HF8XSGjfSvG5zfPgXFcUjFJh56ifWzYneWMEQSCkXgSdPJ51R&quot;,</span><br><span class="line">  &quot;initial_configuration&quot;: &#123;</span><br><span class="line">    &quot;max_block_net_usage&quot;: 1048576,</span><br><span class="line">    &quot;target_block_net_usage_pct&quot;: 1000,</span><br><span class="line">    &quot;max_transaction_net_usage&quot;: 524288,</span><br><span class="line">    &quot;base_per_transaction_net_usage&quot;: 12,</span><br><span class="line">    &quot;net_usage_leeway&quot;: 500,</span><br><span class="line">    &quot;context_free_discount_net_usage_num&quot;: 20,</span><br><span class="line">    &quot;context_free_discount_net_usage_den&quot;: 100,</span><br><span class="line">    &quot;max_block_cpu_usage&quot;: 100000,</span><br><span class="line">    &quot;target_block_cpu_usage_pct&quot;: 500,</span><br><span class="line">    &quot;max_transaction_cpu_usage&quot;: 100000,</span><br><span class="line">    &quot;base_per_transaction_cpu_usage&quot;: 512,</span><br><span class="line">    &quot;base_per_action_cpu_usage&quot;: 1024,</span><br><span class="line">    &quot;base_setcode_cpu_usage&quot;: 2097152,</span><br><span class="line">    &quot;per_signature_cpu_usage&quot;: 102400,</span><br><span class="line">    &quot;cpu_usage_leeway&quot;: 2048,</span><br><span class="line">    &quot;context_free_discount_cpu_usage_num&quot;: 20,</span><br><span class="line">    &quot;context_free_discount_cpu_usage_den&quot;: 100,</span><br><span class="line">    &quot;max_transaction_lifetime&quot;: 3600,</span><br><span class="line">    &quot;deferred_trx_expiration_window&quot;: 600,</span><br><span class="line">    &quot;max_transaction_delay&quot;: 3888000,</span><br><span class="line">    &quot;max_inline_action_size&quot;: 4096,</span><br><span class="line">    &quot;max_inline_action_depth&quot;: 4,</span><br><span class="line">    &quot;max_authority_depth&quot;: 6,</span><br><span class="line">    &quot;max_generated_transaction_count&quot;: 16</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;initial_chain_id&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Node2:192.168.195.176</strong></p>
<p><strong>config.ini配置如下:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">genesis-json = &quot;genesis.json&quot;</span><br><span class="line">block-log-dir = &quot;blocks&quot;</span><br><span class="line">shared-memory-size-mb = 1024</span><br><span class="line">http-server-address = 127.0.0.1:8888</span><br><span class="line">access-control-allow-credentials = false</span><br><span class="line">p2p-listen-endpoint = 0.0.0.0:9876</span><br><span class="line">p2p-server-address = 192.168.195.176:9876</span><br><span class="line">p2p-peer-address = 192.168.195.144:9876</span><br><span class="line">p2p-peer-address = 192.168.195.191:9876</span><br><span class="line">agent-name = &quot;EOS Test Agent&quot;</span><br><span class="line">allowed-connection = any</span><br><span class="line">max-clients = 25</span><br><span class="line">connection-cleanup-period = 30</span><br><span class="line">network-version-match = 0</span><br><span class="line">sync-fetch-span = 100</span><br><span class="line">max-implicit-request = 1500</span><br><span class="line">enable-stale-production = false</span><br><span class="line">max-transaction-time = 30</span><br><span class="line">required-participation = 33</span><br><span class="line">producer-name = kgtest</span><br><span class="line">private-key = [&quot;&quot;,&quot;&quot;]</span><br><span class="line">txn-reference-block-lag = 0</span><br><span class="line">wallet-dir = &quot;.&quot;</span><br><span class="line">unlock-timeout = 900</span><br><span class="line">plugin = eosio::chain_api_plugin</span><br><span class="line">plugin = eosio::chain_plugin</span><br><span class="line">plugin = eosio::producer_plugin</span><br><span class="line">plugin = eosio::http_plugin</span><br></pre></td></tr></table></figure></p>
<p><strong>genesis配置和Node1一样</strong></p>
<p><strong>Node3:192.168.195.191</strong><br><strong>config.ini配置如下:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">genesis-json = &quot;genesis.json&quot;</span><br><span class="line">block-log-dir = &quot;blocks&quot;</span><br><span class="line">shared-memory-size-mb = 1024</span><br><span class="line">http-server-address = 127.0.0.1:8888</span><br><span class="line">access-control-allow-credentials = false</span><br><span class="line">p2p-listen-endpoint = 0.0.0.0:9876</span><br><span class="line">p2p-server-address = 192.168.195.176:9876</span><br><span class="line">p2p-peer-address = 192.168.195.144:9876</span><br><span class="line">p2p-peer-address = 192.168.195.176:9876</span><br><span class="line">agent-name = &quot;EOS Test Agent&quot;</span><br><span class="line">allowed-connection = any</span><br><span class="line">max-clients = 25</span><br><span class="line">connection-cleanup-period = 30</span><br><span class="line">network-version-match = 0</span><br><span class="line">sync-fetch-span = 100</span><br><span class="line">max-implicit-request = 1500</span><br><span class="line">enable-stale-production = false</span><br><span class="line">max-transaction-time = 30</span><br><span class="line">required-participation = 33</span><br><span class="line">producer-name = kgtest</span><br><span class="line">private-key = [&quot;&quot;,&quot;&quot;]</span><br><span class="line">txn-reference-block-lag = 0</span><br><span class="line">wallet-dir = &quot;.&quot;</span><br><span class="line">unlock-timeout = 900</span><br><span class="line">plugin = eosio::chain_api_plugin</span><br><span class="line">plugin = eosio::chain_plugin</span><br><span class="line">plugin = eosio::producer_plugin</span><br><span class="line">plugin = eosio::http_plugin</span><br></pre></td></tr></table></figure></p>
<p><strong>genesis配置和Node1一样</strong></p>
<h5 id="环境搭建开始"><a href="#环境搭建开始" class="headerlink" title="环境搭建开始"></a>环境搭建开始</h5><p>首先需要启动Node1节点，正常的话Node1会开始出块。同时启动Node2和Node3，这两个节点会同步Node1节点的区块。</p>
<h5 id="创建钱包"><a href="#创建钱包" class="headerlink" title="创建钱包"></a>创建钱包</h5><blockquote>
<p>cleos wallet create -n kgbp</p>
</blockquote>
<p>这里需要保存好wallet的私钥，之后unlock需要使用</p>
<h5 id="打开并解锁钱包"><a href="#打开并解锁钱包" class="headerlink" title="打开并解锁钱包"></a>打开并解锁钱包</h5><blockquote>
<p>cleos wallet open -n kgbp cleos wallet unlock -n kgbp</p>
</blockquote>
<h5 id="导入eosio账户的私钥到钱包里"><a href="#导入eosio账户的私钥到钱包里" class="headerlink" title="导入eosio账户的私钥到钱包里"></a>导入eosio账户的私钥到钱包里</h5><blockquote>
<p>cleos wallet import -n kgbp xxxxxxxxxxxxxxxxxxxxxx</p>
</blockquote>
<h5 id="创建并发布token"><a href="#创建并发布token" class="headerlink" title="创建并发布token"></a>创建并发布token</h5><ol>
<li>创建eosio.token账户，这里可以使用别的名字，只要在后序的命令操作中保持一致就好了，另外创建完账户之后记得要导入账户的私钥，要不后序关于这个账户的操作会没有权限。</li>
</ol>
<blockquote>
<p>cleos create account eosio eosio.token EOS721PhsVCdLXatGMxu2kNBMPtQZzV8QU6Wu1qC9YFBZegyiP8if EOS721PhsVCdLXatGMxu2kNBMPtQZzV8QU6Wu1qC9YFBZegyiP8if</p>
</blockquote>
<ol start="2">
<li>发布eosio.token合约</li>
</ol>
<blockquote>
<p>cleos set contract eosio.token ./contracts/eosio.token/</p>
</blockquote>
<ol start="3">
<li>创建和发布代币</li>
</ol>
<blockquote>
<p>cleos  push action eosio.token create ‘[“eosio”,”1000000000.0000 EOS”,0,0,0]’ -p eosio.token<br>cleos  push action eosio.token issue ‘[“eosio”,”1000000000.0000 EOS”,”issue”]’ -p eosio</p>
</blockquote>
<ol start="4">
<li>查询代币数量</li>
</ol>
<p>如果上面的操作都成功的话，下面这个命令返回的是1000000000.00000 EOS</p>
<blockquote>
<p>cleos get currency balance eosio.token eosio</p>
</blockquote>
<h5 id="部署eosio-system合约"><a href="#部署eosio-system合约" class="headerlink" title="部署eosio.system合约"></a>部署eosio.system合约</h5><p>如果部署失败的话，可以多尝试几次，我是尝试到第三次成功的</p>
<blockquote>
<p>cleos set contract eosio ./contracts/eosio.system/</p>
</blockquote>
<p>部署了eosio.system合约之后，cleos create account这个命令就不能创建账户了，暂时还不清楚是什么原因。让后可以用下面这个命令创建账户。</p>
<blockquote>
<p>cleos system newaccount eosio kgtest EOS5VPJHpT6aUfqVyW2XNNc2JgwtAa15nnQXMbzyvSQQHr2NYqCDz EOS5VPJHpT6aUfqVyW2XNNc2JgwtAa15nnQXMbzyvSQQHr2NYqCDz  –stake-net ‘50.00 EOS’ –stake-cpu ‘50.00 EOS’<br>cleos system newaccount eosio kgtestt EOS79bDtiWLaSkWaHi59u5wdWL4XKfLgwBCvWa1FTvCT8bDiYXjQY EOS79bDtiWLaSkWaHi59u5wdWL4XKfLgwBCvWa1FTvCT8bDiYXjQY  –stake-net ‘50.00 EOS’ –stake-cpu ‘50.00 EOS’<br>cleos system newaccount eosio kgtesttt EOS5WhVn5sKfTudx7THKLMSCH9BWchfBMdM1Q6aLU86tCvhUsjJZ6 EOS5WhVn5sKfTudx7THKLMSCH9BWchfBMdM1Q6aLU86tCvhUsjJZ6  –stake-net ‘50.00 EOS’ –stake-cpu ‘50.00 EOS’</p>
</blockquote>
<p>创建完成之后导入账户私钥。</p>
<h5 id="Node2注册成为bp"><a href="#Node2注册成为bp" class="headerlink" title="Node2注册成为bp"></a>Node2注册成为bp</h5><blockquote>
<p>cleos  system regproducer kgtest EOS5VPJHpT6aUfqVyW2XNNc2JgwtAa15nnQXMbzyvSQQHr2NYqCDz <a href="http://http-server-address:8888" target="_blank" rel="noopener">http://http-server-address:8888</a></p>
</blockquote>
<h5 id="给创建的账户转账"><a href="#给创建的账户转账" class="headerlink" title="给创建的账户转账"></a>给创建的账户转账</h5><blockquote>
<p>cleos  push action eosio.token transfer ‘[“eosio”, “kgtest”,”100000000.0000 EOS”,”vote”]’ -p eosio<br>cleos  push action eosio.token transfer ‘[“eosio”, “kgtestt”,”100000000.0000 EOS”,”vote”]’ -p eosio<br>cleos  push action eosio.token transfer ‘[“eosio”, “kgtesttt”,”100000000.0000 EOS”,”vote”]’ -p eosio</p>
</blockquote>
<h5 id="锁定代币"><a href="#锁定代币" class="headerlink" title="锁定代币"></a>锁定代币</h5><blockquote>
<p>cleos system delegatebw kgtest kgtest ‘25000000.0000 EOS’ ‘25000000.0000 EOS’ –transfer<br>cleos system delegatebw kgtestt kgtestt ‘25000000.0000 EOS’ ‘25000000.0000 EOS’ –transfer<br> cleos system delegatebw kgtesttt kgtesttt ‘25000000.0000 EOS’ ‘25000000.0000 EOS’ –transfer</p>
</blockquote>
<h5 id="给出块节点投票"><a href="#给出块节点投票" class="headerlink" title="给出块节点投票"></a>给出块节点投票</h5><blockquote>
<p>cleos system voteproducer prods kgtest kgtest<br>cleos system voteproducer prods kgtestt kgtest<br>cleos system voteproducer prods kgtesttt kgtest</p>
</blockquote>
<p>然后就可以观察到Node2节点出块了。</p>
<p>有任何不清楚的地方可以加老张微信：18221177660或加qq：772121684 </p>

    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="http://zhanghoufu.github.io" target="_blank">张后富的区块链博客</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
    
        <a href="/2018/05/21/教你如何在EOS区块链上发币/" class="next-post btn btn-default" title='教你如何在EOS区块链上发币'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">教你如何在EOS区块链上发币</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
   <p>评论系统未开启，无法评论！</p>

    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        <ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#环境搭建开始"><span class="toc-text">环境搭建开始</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建钱包"><span class="toc-text">创建钱包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#打开并解锁钱包"><span class="toc-text">打开并解锁钱包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#导入eosio账户的私钥到钱包里"><span class="toc-text">导入eosio账户的私钥到钱包里</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建并发布token"><span class="toc-text">创建并发布token</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#部署eosio-system合约"><span class="toc-text">部署eosio.system合约</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Node2注册成为bp"><span class="toc-text">Node2注册成为bp</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#给创建的账户转账"><span class="toc-text">给创建的账户转账</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#锁定代币"><span class="toc-text">锁定代币</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#给出块节点投票"><span class="toc-text">给出块节点投票</span></a></li></ol>
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<!--<a id="toc-btn">
    <i class="fa fa-bars"></i>
</a>-->

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



	<script src="/js/search.js?rev=@@hash"></script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>